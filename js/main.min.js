function get_attending_radio(e){var n="rsvp_name_attend_"+e;return radio='<input type="radio" id="'+n+'1" name="'+n+'" value="True"><label for="'+n+"1\">Can't Wait!</label>",radio+='<input type="radio" id="'+n+'2" name="'+n+'" value="False"><label for="'+n+'2">Wish I Could Be There</label>',radio}function getMarker(e,n,t,i,o){return ic=o,"undefined"==typeof o&&(ic="marker_pin.png"),new google.maps.Marker({position:new google.maps.LatLng(t,i),map:e,title:n,icon:"img/"+ic})}function getInfoWindow(e,n){var t='<div class="content"><h1 class="gmap_marker_heading">'+e+'</h1><div id="gmap_marker_content"><p>'+n+"</p>";return new google.maps.InfoWindow({content:t,maxwidth:200})}function doOpenInfoWindow(e,n){return function(){-1!=openInfoWindow&&infoWindows[openInfoWindow].close(),infoWindows[n].open(e,markers[n]),openInfoWindow=n}}function initialize(){var e=[{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#b19260"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#b19260"},{lightness:29},{weight:.1}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#b19260"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#464036"},{lightness:10}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]}],n={center:new google.maps.LatLng(34.029162,-84.360716),zoom:13,styles:e,scrollwheel:!1,panControl:!1,draggable:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.RIGHT_TOP}},t=new google.maps.Map(document.getElementById("map_canvas"),n);$.getJSON("data/locations.json",function(e){var n=0;$.each(e.locs,function(e,i){markers.push(getMarker(t,i.name,i.lat,i["long"],i.icon)),infoWindows.push(getInfoWindow(i.name,i.desc)),google.maps.event.addListener(markers[n],"click",doOpenInfoWindow(t,n)),n+=1})})}function handleMapLocationClick(){}function resizeWindow(){var e=$("#main_background").outerHeight(),n=$(window).height(),t=e-n;scene.remove(),scene.addTo(scroll_controller),$("#main_background").css({height:n,"padding-top":"0px"}),$("#home").css({"margin-top":-(120+t)})}var openInfoWindow=-1,infoWindows=[],markers=[],scene=null,scroll_controller=null,RSVP_CONFIRMED='<p>We received your RSVP!</p><p>Need to make a change? <a href="mailto:ryanl.jillw@gmail.com">Contact Ryan</a>';$("#rsvp_confirm_form").submit(function(e){var n={};$.each($("#rsvp_confirm_form").serializeArray(),function(e,t){n[t.name]=t.value});for(var t="",i=[],o=0;o<n.invite_count;++o){var a="rsvp_name_"+o,r="rsvp_name_attend_"+o;if(""!=n[a]){if(!(r in n)){t="We need to know if "+n[a]+" will attend!";break}attending="True"==n[r]?!0:!1,not=attending?"":"not ",i.push({name:n[a],attending:attending}),t=""}}if($("#rsvp_validate_error").text(t),""==t){email=n.email,"Insert your email address"==email&&(email=""),submit={names:i,email:email};var s="http://app.jillandryan.us/invitation/";$.ajax({url:s+$("#rsvp_code").val(),type:"PUT",contentType:"application/json",data:JSON.stringify(submit),success:function(e){jdata=JSON.parse(e),$("#rsvp_code_message").html(RSVP_CONFIRMED)},error:function(){$("#rsvp_content_initial").hide(),$("#rsvp_content_error").css("display","inline-block")}})}e.preventDefault()}),$("#rsvp_code_form").submit(function(e){var n="http://app.jillandryan.us/invitation/";$.ajax({url:n+$("#rsvp_code").val(),type:"GET",success:function(e){if(jdata=JSON.parse(e),$("#rsvp_content_initial").hide(),$("#rsvp_content_confirm").css("display","inline-block"),confirm_pane="",0==jdata.rsvp_complete){for(confirm_pane="<p>Thanks for coming to the website! Will we be seeing you at the wedding?</p>",i=0,$.each(jdata.rsvp_names,function(e,n){var t="rsvp_name_"+i;name=n.name,confirm_pane+='<p><input type="text" id="'+t+'" name="'+t+'" value="'+name+'"></input>',confirm_pane+=get_attending_radio(i),confirm_pane+="</p>",i+=1});i<jdata.max_invites;){var n="rsvp_name_"+i;confirm_pane+='<p><input type="text" id="'+n+'" name="'+n+'" value=""></input>',confirm_pane+=get_attending_radio(i),confirm_pane+="</p>",i+=1}confirm_pane+='<input type="hidden" id="invite_count" name="invite_count" value="'+jdata.max_invites+'"></input>',confirm_pane+='<p>Let us keep you updated as the big day gets closer!</p><input type="text" id="email" name="email" value="Insert your email address" onfocus="if (this.value==\'Insert your email address\') this.value=\'\';"></input>',confirm_pane+='<input type="submit" value="RSVP!"></input>'}else confirm_pane=RSVP_CONFIRMED;$("#rsvp_code_message").html(confirm_pane)},error:function(){$("#rsvp_content_initial").hide(),$("#rsvp_content_error").css("display","inline-block")}}),e.preventDefault()}),$("#rsvp_retry").click(function(e){e.preventDefault(),$("#rsvp_content_error").css("display","none"),$("#rsvp_content_initial").css("display","inline-block")}),$("#nav_container").click(function(e){""!=e.target.id&&$(document).scrollTo(0,500)}),$("#nav_container").hover(function(){$("#nav_label").html("Top"),$("#nav_label").animate({top:"40px",opacity:1},{queue:!1,duration:150}).fadeIn(50)},function(){$("#nav_label").html(""),$("#nav_label").animate({top:"40px",opacity:1},{queue:!1,duration:150}).fadeOut(50)}),$("#rsvp_link").click(function(){$(document).scrollTo($("#rsvp"),500,{axis:"y"})}),$("#rsvp_link").hover(function(){$("#rsvp_carrot").css("background-position","-356px -315px")},function(){$("#rsvp_carrot").css("background-position","-360px -315px")}),google.maps.event.addDomListener(window,"load",initialize),$(document).ready(function(){sideNav.init(),scroll_controller=new ScrollMagic,scene=new ScrollScene({triggerElement:"#main_background",triggerHook:"onLeave"}).setTween(TweenLite.to("#scroll_contents",1,{ease:Linear.easeNone})).addTo(scroll_controller).setPin("#main_background"),resizeWindow()}),$(window).load(function(){$("#loading").css("display","none"),$("#container").css("visibility","visible");var e=new Date(2015,3,11,17,30,0);$("div#default_countdown").countdown({until:e}),resizeWindow()}),$(window).resize(resizeWindow);var sideNav=function(){var e,n=function(){e=$("#nav_links li"),e.hover(function(){$(this).children().stop().animate({top:"40px",opacity:1},{queue:!1,duration:150}).fadeIn(150),$("#nav_label").animate({top:"40px",opacity:1},{queue:!1,duration:150}).fadeOut(10)},function(){$(this).children().stop().animate({top:"55px",opacity:1},{queue:!1,duration:150}).fadeOut(150)}),e.click(function(){var n=e.index(this);$(document).scrollTo("section:eq("+(n+1)+")",500,{axis:"y",easing:"easeInOutQuart"})})},t=function(n){1===n?e.removeClass("selected"):(e.removeClass("selected"),e.eq(n-2).addClass("selected"))},i=function(){$navLinksMobile=$("#mobile_menu ol li"),$navLinksMobile.click(function(){var e=$navLinksMobile.index(this);$("#mobile_menu ol").css({display:"none"}),$(document).scrollTo("section:eq("+(e+1)+")",500,{axis:"y",easing:"easeInOutQuart"})})};return{init:n,navIndicator:t,mobile:i}}();